<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>DOM</title>
    <style type="text/css">
    </style>
  </head>
  <body>
    <input type="text" name="marque" id="marque"/>
    <button type="button" id="searchBtn">Rechercher</button>
    <div id="my-app">
    </div>

    <script type="text/javascript">

      let chaussures = [ // tableau
        { marque: 'adidas', taille: 38, prix: 90.00 },
        { marque: 'adidas', taille: 37, prix: 79.99 },
        { marque: 'nike', taille: 40, prix: 80.00 },
        { marque: 'nike', taille: 41, prix: 60.00 },
        { marque: 'nike', taille: 43, prix: 70.00 },
        { marque: 'shoes.com', taille: 44, prix: 50.00 },
        { marque: 'shoes.com', taille: 39, prix: 55.00 },
        { marque: 'shoes.com', taille: 38, prix: 65.50 },
        { marque: 'alibaba', taille: 40, prix: 90.00 },
        { marque: 'alibaba', taille: 41, prix: 80.00 },
        { marque: 'alibaba', taille: 42, prix: 70.00 },
        { marque: 'adidas', taille: 41, prix: 86.00 },
        { marque: 'adidas', taille: 39, prix: 57.00 }
      ]

      afficherListeChaussures(chaussures);

      const searchBtn = document.querySelector('#searchBtn')
      searchBtn.addEventListener('click', (event) => {
        const filterInput = document.querySelector('#marque')
        const marque = filterInput.value

        if(marque === '') {
          afficherListeChaussures(chaussures)
        } else {
          const filteredChaussures = chercherMarque(marque)
          afficherListeChaussures(filteredChaussures)
        }
      })

      function chercherMarque (marqueCherchee) {
        // définir un variable de résultat
        let resultat = []

        // parcourir chaussures et trouver les modèle de la marque
        //quand trouvé ajouter au résultat
        for(let i = 0; i < chaussures.length; i++) {
          if(chaussures[i].marque === marqueCherchee) {
            resultat.push(chaussures[i])
          }
        }

        // retourner le résultat
        return resultat
      }

      function afficherListeChaussures(listeChaussures) {
        // créer un ul
        const ul = document.createElement('ul')

        // parcourir les chaussures
        for (let i = 0; i < listeChaussures.length; i++) {
          // pour chaque :
          //    - créer un li
          const li = document.createElement('li')

          //    - créer le texte et ajouter le texte au li
          // chaussure.append('Marque : ' + listeChaussures[i].marque 
          //   + ', taille : ' + listeChaussures[i].taille
          //   + ', prix : ' + listeChaussures[i].prix)
          li.append(`Marque : ${listeChaussures[i].marque}, taille : ${listeChaussures[i].taille}, prix : ${listeChaussures[i].prix}`)

          //    - ajouter le li au ul
          ul.append(li)
        }

        // récupérer my-app
        const myApp = document.querySelector('#my-app')
        // vider my-app
        myApp.textContent = ''
        // mettre le ul dans my-app
        myApp.append(ul)
      }
    </script>
  </body>
</html>